import{s as re,K as ee,L as ie,M as q,ao as ce,U as Y,ap as ue,z as x,d as h,e as D,f as e,Q as O,R as $,j as s,t as f,h as w,w as m,l as W,V as fe,W as ve,B as J,aa as se,S as oe,aq as pe,T as me,ar as ae,as as ye,at as he,a6 as Z,r as b,au as _e,av as ge,a7 as G,x as be,P as Ce,X as ke,aw as Ae,ax as Q,af as Ie,ay as De,az as X,N as we,O as Se,m as Ee,a0 as Fe,aA as $e,aB as Pe,ad as Te,ae as Be,aC as Le,Y as Oe,a as te,_ as xe,aD as Re,k as c,F as K,i as H,aE as Ne,A as ze,J as Me,p as Ve,n as je}from"./index-042307f1.js";import{u as qe,a as Ue,E as Ke,b as We}from"./index-dd55dd2b.js";import"./scroll-fc580450.js";const Je=(...o)=>d=>{o.forEach(r=>{re(r)?r(d):r.value=d})},le=Symbol("dialogInjectionKey"),ne=ee({center:Boolean,alignCenter:Boolean,closeIcon:{type:ie},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Ye={close:()=>!0},Ze=["aria-level"],Ge=["aria-label"],Qe=["id"],Xe=q({name:"ElDialogContent"}),He=q({...Xe,props:ne,emits:Ye,setup(o){const d=o,{t:r}=ce(),{Close:n}=pe,{dialogRef:k,headerRef:p,bodyId:A,ns:u,style:v}=Y(le),{focusTrapRef:I}=Y(ue),C=x(()=>[u.b(),u.is("fullscreen",d.fullscreen),u.is("draggable",d.draggable),u.is("align-center",d.alignCenter),{[u.m("center")]:d.center},d.customClass]),S=Je(I,k),i=x(()=>d.draggable);return qe(k,p,i),(a,y)=>(h(),D("div",{ref:s(S),class:$(s(C)),style:se(s(v)),tabindex:"-1"},[e("header",{ref_key:"headerRef",ref:p,class:$(s(u).e("header"))},[O(a.$slots,"header",{},()=>[e("span",{role:"heading","aria-level":a.ariaLevel,class:$(s(u).e("title"))},f(a.title),11,Ze)]),a.showClose?(h(),D("button",{key:0,"aria-label":s(r)("el.dialog.close"),class:$(s(u).e("headerbtn")),type:"button",onClick:y[0]||(y[0]=E=>a.$emit("close"))},[w(s(ve),{class:$(s(u).e("close"))},{default:m(()=>[(h(),W(fe(a.closeIcon||s(n))))]),_:1},8,["class"])],10,Ge)):J("v-if",!0)],2),e("div",{id:s(A),class:$(s(u).e("body"))},[O(a.$slots,"default")],10,Qe),a.$slots.footer?(h(),D("footer",{key:0,class:$(s(u).e("footer"))},[O(a.$slots,"footer")],2)):J("v-if",!0)],6))}});var es=oe(He,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ss=ee({...ne,appendToBody:Boolean,beforeClose:{type:me(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),os={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:o=>ye(o),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},as=(o,d)=>{const n=ke().emit,{nextZIndex:k}=he();let p="";const A=Z(),u=Z(),v=b(!1),I=b(!1),C=b(!1),S=b(o.zIndex||k());let i,a;const y=_e("namespace",Ae),E=x(()=>{const g={},L=`--${y.value}-dialog`;return o.fullscreen||(o.top&&(g[`${L}-margin-top`]=o.top),o.width&&(g[`${L}-width`]=ge(o.width))),g}),R=x(()=>o.alignCenter?{display:"flex"}:{});function N(){n("opened")}function T(){n("closed"),n(ae,!1),o.destroyOnClose&&(C.value=!1)}function z(){n("close")}function t(){a==null||a(),i==null||i(),o.openDelay&&o.openDelay>0?{stop:i}=Q(()=>F(),o.openDelay):F()}function M(){i==null||i(),a==null||a(),o.closeDelay&&o.closeDelay>0?{stop:a}=Q(()=>j(),o.closeDelay):j()}function V(){function g(L){L||(I.value=!0,v.value=!1)}o.beforeClose?o.beforeClose(g):M()}function U(){o.closeOnClickModal&&V()}function F(){Ie&&(v.value=!0)}function j(){v.value=!1}function l(){n("openAutoFocus")}function P(){n("closeAutoFocus")}function B(g){var L;((L=g.detail)==null?void 0:L.focusReason)==="pointer"&&g.preventDefault()}o.lockScroll&&Ue(v);function de(){o.closeOnPressEscape&&V()}return G(()=>o.modelValue,g=>{g?(I.value=!1,t(),C.value=!0,S.value=o.zIndex?S.value++:k(),be(()=>{n("open"),d.value&&(d.value.scrollTop=0)})):v.value&&M()}),G(()=>o.fullscreen,g=>{d.value&&(g?(p=d.value.style.transform,d.value.style.transform=""):d.value.style.transform=p)}),Ce(()=>{o.modelValue&&(v.value=!0,C.value=!0,t())}),{afterEnter:N,afterLeave:T,beforeLeave:z,handleClose:V,onModalClick:U,close:M,doClose:j,onOpenAutoFocus:l,onCloseAutoFocus:P,onCloseRequested:de,onFocusoutPrevented:B,titleId:A,bodyId:u,closed:I,style:E,overlayDialogStyle:R,rendered:C,visible:v,zIndex:S}},ts=["aria-label","aria-labelledby","aria-describedby"],ls=q({name:"ElDialog",inheritAttrs:!1}),ns=q({...ls,props:ss,emits:os,setup(o,{expose:d}){const r=o,n=De();X({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},x(()=>!!n.title)),X({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},x(()=>!!r.customClass));const k=we("dialog"),p=b(),A=b(),u=b(),{visible:v,titleId:I,bodyId:C,style:S,overlayDialogStyle:i,rendered:a,zIndex:y,afterEnter:E,afterLeave:R,beforeLeave:N,handleClose:T,onModalClick:z,onOpenAutoFocus:t,onCloseAutoFocus:M,onCloseRequested:V,onFocusoutPrevented:U}=as(r,p);Se(le,{dialogRef:p,headerRef:A,bodyId:C,ns:k,rendered:a,style:S});const F=We(z),j=x(()=>r.draggable&&!r.fullscreen);return d({visible:v,dialogContentRef:u}),(l,P)=>(h(),W(Le,{to:"body",disabled:!l.appendToBody},[w(Be,{name:"dialog-fade",onAfterEnter:s(E),onAfterLeave:s(R),onBeforeLeave:s(N),persisted:""},{default:m(()=>[Ee(w(s(Ke),{"custom-mask-event":"",mask:l.modal,"overlay-class":l.modalClass,"z-index":s(y)},{default:m(()=>[e("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:s(I),"aria-describedby":s(C),class:$(`${s(k).namespace.value}-overlay-dialog`),style:se(s(i)),onClick:P[0]||(P[0]=(...B)=>s(F).onClick&&s(F).onClick(...B)),onMousedown:P[1]||(P[1]=(...B)=>s(F).onMousedown&&s(F).onMousedown(...B)),onMouseup:P[2]||(P[2]=(...B)=>s(F).onMouseup&&s(F).onMouseup(...B))},[w(s(Fe),{loop:"",trapped:s(v),"focus-start-el":"container",onFocusAfterTrapped:s(t),onFocusAfterReleased:s(M),onFocusoutPrevented:s(U),onReleaseRequested:s(V)},{default:m(()=>[s(a)?(h(),W(es,$e({key:0,ref_key:"dialogContentRef",ref:u},l.$attrs,{"custom-class":l.customClass,center:l.center,"align-center":l.alignCenter,"close-icon":l.closeIcon,draggable:s(j),fullscreen:l.fullscreen,"show-close":l.showClose,title:l.title,"aria-level":l.headerAriaLevel,onClose:s(T)}),Pe({header:m(()=>[l.$slots.title?O(l.$slots,"title",{key:1}):O(l.$slots,"header",{key:0,close:s(T),titleId:s(I),titleClass:s(k).e("title")})]),default:m(()=>[O(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:m(()=>[O(l.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):J("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,ts)]),_:3},8,["mask","overlay-class","z-index"]),[[Te,s(v)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var ds=oe(ns,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const rs=Oe(ds);const is=()=>te.get("/member/order/pre"),cs=o=>te({method:"post",url:"/member/order",data:o});const _=o=>(Ve("data-v-a2ea6ff0"),o=o(),je(),o),us={class:"xtx-pay-checkout-page"},fs={class:"container"},vs={class:"wrapper"},ps=_(()=>e("h3",{class:"box-title"},"收货地址",-1)),ms={class:"box-body"},ys={class:"address"},hs={class:"text"},_s={key:0,class:"none"},gs={key:1},bs=_(()=>e("span",null,[c("收"),e("i"),c("货"),e("i"),c("人：")],-1)),Cs=_(()=>e("span",null,"联系方式：",-1)),ks=_(()=>e("span",null,"收货地址：",-1)),As={class:"action"},Is=_(()=>e("h3",{class:"box-title"},"商品信息",-1)),Ds={class:"box-body"},ws={class:"goods"},Ss=_(()=>e("thead",null,[e("tr",null,[e("th",{width:"520"},"商品信息"),e("th",{width:"170"},"单价"),e("th",{width:"170"},"数量"),e("th",{width:"170"},"小计"),e("th",{width:"170"},"实付")])],-1)),Es={href:"javascript:;",class:"info"},Fs=["src"],$s={class:"right"},Ps=Ne('<h3 class="box-title" data-v-a2ea6ff0>配送时间</h3><div class="box-body" data-v-a2ea6ff0><a class="my-btn active" href="javascript:;" data-v-a2ea6ff0>不限送货时间：周一至周日</a><a class="my-btn" href="javascript:;" data-v-a2ea6ff0>工作日送货：周一至周五</a><a class="my-btn" href="javascript:;" data-v-a2ea6ff0>双休日、假日送货：周六至周日</a></div><h3 class="box-title" data-v-a2ea6ff0>支付方式</h3><div class="box-body" data-v-a2ea6ff0><a class="my-btn active" href="javascript:;" data-v-a2ea6ff0>在线支付</a><a class="my-btn" href="javascript:;" data-v-a2ea6ff0>货到付款</a><span style="color:#999;" data-v-a2ea6ff0>货到付款需付5元手续费</span></div><h3 class="box-title" data-v-a2ea6ff0>金额明细</h3>',5),Ts={class:"box-body"},Bs={class:"total"},Ls=_(()=>e("dt",null,"商品件数：",-1)),Os=_(()=>e("dt",null,"商品总价：",-1)),xs=_(()=>e("dt",null,[c("运"),e("i"),c("费：")],-1)),Rs=_(()=>e("dt",null,"应付总额：",-1)),Ns={class:"price"},zs={class:"submit"},Ms={class:"addressWrapper"},Vs=["onClick"],js=_(()=>e("span",null,[c("收"),e("i"),c("货"),e("i"),c("人：")],-1)),qs=_(()=>e("span",null,"联系方式：",-1)),Us=_(()=>e("span",null,"收货地址：",-1)),Ks={class:"dialog-footer"},Ws={__name:"index",setup(o){const d=Re(),r=b({}),n=b({});(async()=>{const{result:i}=await is();r.value=i,n.value=i.userAddresses.find(a=>a.isDefault===0)||i.userAddresses[0]})();const p=b(!1),A=b({}),u=()=>{p.value=!0,A.value=n.value},v=i=>{A.value=i},I=()=>{n.value=A.value,p.value=!1},C=b({deliveryTimeType:1,payType:1,payChannel:1,buyerMessage:""}),S=async()=>{const i={goods:r.value.goods.map(E=>({skuId:E.skuId,count:E.count})),addressId:n.value.id,...C.value},{result:{id:a}}=await cs(i);d.replace({path:"/pay",query:{orderId:a}}),ze().replaceLocalCartWithOnline()};return(i,a)=>{var R,N,T,z;const y=Me,E=rs;return h(),D(K,null,[e("div",us,[e("div",fs,[e("div",vs,[ps,e("div",ms,[e("div",ys,[e("div",hs,[n.value?(h(),D("ul",gs,[e("li",null,[bs,c(f(n.value.receiver),1)]),e("li",null,[Cs,c(f(n.value.contact),1)]),e("li",null,[ks,c(f(n.value.fullLocation)+" "+f(n.value.address),1)])])):(h(),D("div",_s,"您需要先添加收货地址才可提交订单。"))]),e("div",As,[w(y,{size:"large",onClick:u},{default:m(()=>[c("切换地址")]),_:1}),w(y,{size:"large",onClick:a[0]||(a[0]=t=>i.addAddressDialog=!0)},{default:m(()=>[c("添加地址")]),_:1})])])]),Is,e("div",Ds,[e("table",ws,[Ss,e("tbody",null,[(h(!0),D(K,null,H(r.value.goods,t=>(h(),D("tr",{key:t.id},[e("td",null,[e("a",Es,[e("img",{src:t.picture,alt:""},null,8,Fs),e("div",$s,[e("p",null,f(t.name),1),e("p",null,f(t.attrsText),1)])])]),e("td",null,"¥"+f(t.price),1),e("td",null,f(t.price),1),e("td",null,"¥"+f(t.totalPrice),1),e("td",null,"¥"+f(t.totalPayPrice),1)]))),128))])])]),Ps,e("div",Ts,[e("div",Bs,[e("dl",null,[Ls,e("dd",null,f((R=r.value.summary)==null?void 0:R.goodsCount)+"件",1)]),e("dl",null,[Os,e("dd",null,"¥"+f((N=r.value.summary)==null?void 0:N.totalPrice.toFixed(2)),1)]),e("dl",null,[xs,e("dd",null,"¥"+f((T=r.value.summary)==null?void 0:T.postFee.toFixed(2)),1)]),e("dl",null,[Rs,e("dd",Ns,f((z=r.value.summary)==null?void 0:z.totalPayPrice.toFixed(2)),1)])])]),e("div",zs,[w(y,{type:"primary",size:"large",onClick:S},{default:m(()=>[c("提交订单")]),_:1})])])])]),w(E,{title:"切换收货地址",width:"30%",center:"",modelValue:p.value,"onUpdate:modelValue":a[2]||(a[2]=t=>p.value=t)},{footer:m(()=>[e("span",Ks,[w(y,{onClick:a[1]||(a[1]=t=>p.value=!1)},{default:m(()=>[c("取消")]),_:1}),w(y,{type:"primary",onClick:I},{default:m(()=>[c("确定")]),_:1})])]),default:m(()=>[e("div",Ms,[(h(!0),D(K,null,H(r.value.userAddresses,t=>(h(),D("div",{class:$(["text item",{active:t.id===A.value.id}]),key:t.id,onClick:M=>v(t)},[e("ul",null,[e("li",null,[js,c(f(t.receiver),1)]),e("li",null,[qs,c(f(t.contact),1)]),e("li",null,[Us,c(f(t.fullLocation+t.address),1)])])],10,Vs))),128))])]),_:1},8,["modelValue"])],64)}}},Gs=xe(Ws,[["__scopeId","data-v-a2ea6ff0"]]);export{Gs as default};
